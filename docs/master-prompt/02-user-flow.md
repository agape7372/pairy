# 🧚 Pairy - 유저 플로우 (User Flow)

## 플로우 다이어그램 범례

```
[페이지/화면]     → 페이지 또는 주요 화면
(액션)           → 사용자 행동
{조건}           → 분기 조건
<결과>           → 시스템 응답/결과
```

---

## 1. 온보딩 플로우 (Onboarding)

### 1.1 첫 방문 유저

```
[랜딩 페이지]
    │
    ├─(틀 둘러보기 클릭)─→ [틀 아카이브]
    │
    ├─(로그인 클릭)─→ [로그인 모달]
    │                    │
    │                    ├─(트위터 로그인)─→ {신규 유저?}
    │                    │                      │
    │                    │                      ├─Yes─→ [프로필 설정]─→ [메인]
    │                    │                      │
    │                    │                      └─No──→ [메인]
    │                    │
    │                    └─(구글 로그인)───→ (동일 플로우)
    │
    └─(에디터 체험 클릭)─→ [에디터 데모]
```

### 1.2 신규 가입 플로우

```
[OAuth 인증 완료]
    │
    ▼
[프로필 설정 페이지]
    │
    ├── 닉네임 입력 (필수, 중복 체크)
    ├── 프로필 이미지 (소셜에서 가져옴, 변경 가능)
    └── 자기소개 (선택)
    │
    ▼
(완료 클릭)
    │
    ▼
<계정 생성 완료>
    │
    ▼
[웰컴 투어 모달] (선택적 스킵 가능)
    │
    ├── Step 1: "틀을 검색해보세요"
    ├── Step 2: "에디터로 열어보세요"
    ├── Step 3: "친구와 함께 편집하세요"
    └── Step 4: "완성작을 저장하세요"
    │
    ▼
[메인 페이지]
```

---

## 2. 틀 탐색 플로우 (Browse Templates)

### 2.1 틀 검색

```
[틀 아카이브 페이지]
    │
    ├─(검색어 입력)─→ <자동완성 제안>
    │                    │
    │                    └─(제안 클릭 or 엔터)─→ <검색 결과>
    │
    ├─(카테고리 필터)─→ <필터링된 결과>
    │
    ├─(태그 클릭)─→ <해당 태그 결과>
    │
    └─(정렬 변경)─→ <재정렬된 결과>
```

### 2.2 틀 상세 조회

```
[틀 카드 클릭]
    │
    ▼
[틀 상세 페이지]
    │
    ├─(좋아요 클릭)─→ {로그인?}
    │                   │
    │                   ├─Yes─→ <좋아요 토글>
    │                   └─No──→ [로그인 모달]
    │
    ├─(북마크 클릭)─→ {로그인?}
    │                   │
    │                   ├─Yes─→ <북마크 추가>
    │                   └─No──→ [로그인 모달]
    │
    ├─(에디터로 열기)─→ {유료 틀?}
    │                     │
    │                     ├─No──→ [에디터 페이지]
    │                     │
    │                     └─Yes─→ {구매 완료?}
    │                               │
    │                               ├─Yes─→ [에디터 페이지]
    │                               └─No──→ [구매 모달]
    │
    ├─(공유하기)─→ <링크 복사 완료 토스트>
    │
    └─(작가 프로필)─→ [작가 프로필 페이지]
```

---

## 3. 에디터 플로우 (Editor)

### 3.1 에디터 진입

```
[에디터로 열기 클릭]
    │
    ▼
{이전 작업 있음?}
    │
    ├─Yes─→ [복구 확인 모달]
    │            │
    │            ├─(불러오기)─→ <이전 작업 복원>
    │            │
    │            └─(새로 시작)─→ <새 캔버스>
    │
    └─No──→ <새 캔버스>
    │
    ▼
[에디터 페이지]
    │
    ├── 틀 이미지 로드
    ├── 편집 영역 활성화
    └── 툴바 표시
```

### 3.2 에디터 편집

```
[에디터 페이지]
    │
    ├─(이미지 드래그&드롭)─→ <이미지 삽입>
    │                           │
    │                           └─(크기/위치 조절)─→ <실시간 반영>
    │
    ├─(텍스트 추가 클릭)─→ <텍스트 박스 생성>
    │                        │
    │                        └─(텍스트 입력/스타일링)─→ <실시간 반영>
    │
    ├─(테마 컬러 클릭)─→ [컬러 패널]
    │                      │
    │                      └─(색상 선택)─→ <전체 테마 변경>
    │
    ├─(되돌리기/다시하기)─→ <히스토리 이동>
    │
    └─(자동 저장)─→ <5초마다 로컬 저장>
```

### 3.3 내보내기

```
[저장하기 클릭]
    │
    ▼
[저장 옵션 모달]
    │
    ├── 형식 선택 (PNG/JPG)
    ├── 해상도 선택 {프리미엄?}
    │       │
    │       ├─Yes─→ 1x / 2x 선택 가능
    │       └─No──→ 1x만 가능
    │
    └── 워터마크 {프리미엄?}
            │
            ├─Yes─→ 워터마크 제거 가능
            └─No──→ 워터마크 필수
    │
    ▼
(다운로드 클릭)
    │
    ▼
<이미지 다운로드>
```

---

## 4. 실시간 협업 플로우 (Collaboration)

### 4.1 협업 시작 (호스트)

```
[에디터 페이지]
    │
    ▼
(협업하기 클릭)
    │
    ▼
[협업 설정 모달]
    │
    ├── 세션 이름 (선택)
    └── 공개 범위 (링크 있으면 누구나)
    │
    ▼
(링크 생성 클릭)
    │
    ▼
<협업 링크 생성>
    │
    ├─(복사하기)─→ <클립보드 복사>
    │
    └─(트위터 공유)─→ <트위터 공유 팝업>
    │
    ▼
[협업 대기 상태]
    │
    └── "상대방을 기다리는 중..."
        │
        ▼
    <상대방 참여>
        │
        ▼
    [협업 모드 활성화]
```

### 4.2 협업 참여 (게스트)

```
[협업 링크 클릭]
    │
    ▼
{로그인 상태?}
    │
    ├─Yes─→ [협업 참여 확인]
    │
    └─No──→ [게스트 참여 모달]
               │
               └── 닉네임 입력
    │
    ▼
(참여하기 클릭)
    │
    ▼
<세션 연결>
    │
    ▼
[협업 에디터]
    │
    ├── 호스트 작업 동기화
    ├── 실시간 커서 표시
    └── 편집 가능 상태
```

### 4.3 협업 진행

```
[협업 에디터]
    │
    ├─(각자 영역 편집)─→ <실시간 동기화>
    │
    ├─(상대방 커서 이동)─→ <커서 위치 표시>
    │
    ├─(채팅 메시지)─→ <메시지 전송> (P2)
    │
    └─(완료 클릭)─→ {양쪽 모두 완료?}
                       │
                       ├─No──→ "상대방 완료 대기 중"
                       │
                       └─Yes─→ [완료 화면]
                                   │
                                   ├── 최종 이미지 미리보기
                                   ├── 다운로드 버튼
                                   └── 공유 버튼
```

---

## 5. 작가 플로우 (Creator)

### 5.1 틀 등록

```
[내 틀 관리 페이지]
    │
    ▼
(새 틀 등록 클릭)
    │
    ▼
[Step 1: 기본 정보]
    │
    ├── 제목 입력
    ├── 설명 입력
    ├── 카테고리 선택
    └── 인원수 선택
    │
    ▼
[Step 2: 파일 업로드]
    │
    ├── 미리보기 이미지 업로드 (필수)
    │
    └── 에디터용 파일 생성
            │
            ▼
        [에디터 모드]
            │
            ├── 편집 영역 지정 (드래그)
            ├── 텍스트 영역 지정
            └── 색상 변경 영역 지정
            │
            ▼
        (영역 설정 완료)
    │
    ▼
[Step 3: 상세 설정]
    │
    ├── 태그 입력 (최소 3개)
    ├── 가격 설정 (무료/유료)
    └── 이용 조건 설정
    │
    ▼
[Step 4: 미리보기]
    │
    ├── 등록될 모습 확인
    │
    └─(수정 필요)─→ 이전 단계로
    │
    ▼
(등록 완료 클릭)
    │
    ▼
<틀 등록 완료>
    │
    ▼
[틀 상세 페이지] (내 틀)
```

### 5.2 틀 통계 조회 (P2)

```
[작가 대시보드]
    │
    ├── 전체 조회수
    ├── 총 좋아요
    ├── 총 사용 횟수
    └── 수익 현황
    │
    ▼
(틀 선택)
    │
    ▼
[틀별 상세 통계]
    │
    ├── 일별 조회수 그래프
    ├── 사용자 유입 경로
    └── 좋아요 추이
```

---

## 6. 구매 플로우 (Purchase)

### 6.1 유료 틀 구매

```
[유료 틀 상세 페이지]
    │
    ▼
(구매하기 클릭)
    │
    ▼
{로그인?}
    │
    ├─No──→ [로그인 모달]─→ (로그인 후 복귀)
    │
    └─Yes─→ [결제 모달]
               │
               ├── 상품 정보 확인
               ├── 결제 수단 선택
               │       │
               │       ├── 카드
               │       ├── 계좌이체
               │       └── 카카오페이
               │
               └── 결제 금액 확인
    │
    ▼
(결제하기 클릭)
    │
    ▼
[결제 진행]
    │
    ├─<결제 성공>─→ [구매 완료 화면]
    │                    │
    │                    └── "에디터로 열기" 활성화
    │
    └─<결제 실패>─→ [오류 안내]
                        │
                        └── 재시도 or 취소
```

### 6.2 구독 결제

```
[프리미엄 안내 페이지]
    │
    ├── 혜택 비교표
    └── 가격 정보
    │
    ▼
(구독하기 클릭)
    │
    ▼
[구독 결제 모달]
    │
    ├── 플랜 선택 (월간/연간)
    ├── 결제 수단 등록
    └── 자동 결제 동의
    │
    ▼
<결제 완료>
    │
    ▼
[구독 활성화]
    │
    └── 프리미엄 배지 표시
```

---

## 7. PC/모바일 분기 플로우

### 7.1 디바이스별 UX

```
[페이지 접속]
    │
    ▼
{디바이스 감지}
    │
    ├─[모바일]─→ [모바일 최적화 UI]
    │               │
    │               ├── 틀 검색/탐색 (전체 기능)
    │               ├── 좋아요/북마크 (전체 기능)
    │               ├── 간편 에디터 (제한된 기능)
    │               │       │
    │               │       ├── 이미지 삽입
    │               │       ├── 텍스트 입력
    │               │       └── 저장
    │               │
    │               └── "상세 편집은 PC에서" 안내
    │
    └─[PC]────→ [데스크톱 UI]
                    │
                    ├── 전체 기능 지원
                    ├── 정밀 편집 도구
                    └── 멀티 레이어 지원
```

### 7.2 모바일 에디터 제한

```
[모바일 에디터]
    │
    ├── ✅ 이미지 추가 (탭으로)
    ├── ✅ 텍스트 추가/편집
    ├── ✅ 기본 이동/크기 조절
    ├── ✅ 테마 컬러 변경
    ├── ✅ 저장/공유
    │
    ├── ⚠️ 정밀 조절 (제한적)
    ├── ⚠️ 레이어 순서 변경
    │
    └── ❌ 실시간 협업 커서 (표시만)
```

---

## 8. 에러 핸들링 플로우

### 8.1 네트워크 에러

```
<요청 실패>
    │
    ▼
{재시도 가능?}
    │
    ├─Yes─→ [재시도 버튼 토스트]
    │            │
    │            └─(재시도 클릭)─→ <요청 재전송>
    │
    └─No──→ [에러 페이지]
               │
               └── "잠시 후 다시 시도해주세요"
```

### 8.2 인증 에러

```
<세션 만료>
    │
    ▼
[자동 로그아웃]
    │
    ▼
[로그인 모달]
    │
    └── "다시 로그인해주세요"
```

### 8.3 권한 에러

```
<접근 권한 없음>
    │
    ▼
{로그인 필요?}
    │
    ├─Yes─→ [로그인 유도 모달]
    │
    └─No──→ {구매 필요?}
               │
               ├─Yes─→ [구매 유도 모달]
               │
               └─No──→ [403 에러 페이지]
```

---

## 9. 협업 세션 라이프사이클

```
[세션 생성]
    │
    ▼
[대기 상태] ←─────────────────┐
    │                         │
    ▼                         │
<참여자 입장>                  │
    │                         │
    ▼                         │
[협업 진행 중]                 │
    │                         │
    ├─<참여자 이탈>──→ {재연결 대기}
    │                    │
    │                    ├─(30초 내 재연결)─┘
    │                    │
    │                    └─(30초 초과)─→ [세션 일시정지]
    │
    ├─<양측 완료>─→ [완료 처리]
    │
    └─<24시간 경과>─→ [세션 만료]
                          │
                          └── 자동 저장본 보관 (7일)
```
